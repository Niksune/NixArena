<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="../assets/css/style.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
</head>

<body>
  <script>
    window.onload = () => {
      if (localStorage.getItem("ID")!=null && localStorage.getItem("ID")!=""){
        document.location.href="../actual-game/manage_account.html?IDaccount="+localStorage.getItem("ID");
      }
    }
  </script>

    <section>
        <div class="input-login">
            <div>
                <label for="login">Your identifiant</label>
                <input type="login" name="login" id="login">
            </div>
            <div>
                <label for="password">Your password</label>
                <br>
                <input type="password" name="password" id="password">
            </div>
            <button id="submit"><h2>login</h2></button>
            <button><a href="../index.html">back</a></button>
        </div>
        
    </section>
    
    <footer>
      <h3>- Made by Nicolas Benoit and Teiva Scouarnec -</h3>
  </footer>

    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.min.js"></script>
    <script>
      $("#submit").click(function () {
        let values = { name : $("#login").val(), password : $("#password").val() };
        console.log(values);
        $.ajax({
          type: "POST",
          headers: { 'Content-Type': 'application/json' },
          url: "../API/accounts/connection",
          data: JSON.stringify(values),
          success: function (result) {
            if(result === "00000000-0000-0000-0000-000000000000")
              alert("Wrong identifiers");
            else
              if (localStorage.getItem("ID")==null || localStorage.getItem("ID")==""){
                localStorage.setItem("ID",result);
                document.location.href="../actual-game/manage_account.html?IDaccount="+result;
              }
              
          },
        });
      });
    </script>
</body>
</html>